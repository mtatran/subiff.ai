<!DOCTYPE html>
<html>
<head>
    <title>Speech Sample</title>
    <meta charset="utf-8" />
    <script src="../../distrib/speech.sdk.bundle.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
        <title>Untitled Document</title>
        <meta name="description" content="">

        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/css/materialize.min.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">


</head>
<style type="text/css">
  .ad-container {
width: 100%;
}

.ad {
border: 1px solid black;
width: 32.2%;
/*Adjust as necessary*/
margin: .3%;
float: left;
/*Add min-height or max-height as necessary*/
}
/* Mobile Styles */
@media only screen and (max-width: 400px) {
body {
  background-color: #white;
  .container{
 width: 33.3%;
 height:33.3%/* Red */
}
}

/* Tablet Styles */
@media only screen and (min-width: 401px) and (max-width: 960px) {
body {
  background-color: #white
  .container{
 width: 66.6%;
 height: 66.6%;
}
  /* Yellow */
}
}

/* Desktop Styles */
@media only screen and (min-width: 961px) {
body {
  background-color: #white; /* Blue */
}
}


.ad-container:after {
display: table;
content: "";
clear: both;
}

h1 {
font-family: 'Roboto', serif;
font-size: 52px;
font-weight: 400;
color: black;
}

p {
font-family: "Roboto", serif;
font-size: 14px;
}

p1 {
font-family: "Roboto", serif;
font-size: 14px;
color: grey
}

.boldlet {
font-family: 'Spectral SC', serif;
font-size: 48px;
}

h2 {
font-family: 'Roboto', serif;
font-size: 36px;
font-weight: 400;
color: black;
}

.image {
display: block;
width: 100%;
height: 100%;
}

.overlay {
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0;
height: 100%;
width: 100%;
opacity: 0;
transition: .5s ease;
background-color: #C1C1C1;
}

.text {
color: white;
font-size: 40px;
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
-ms-transform: translate(-50%, -50%);
text-align: center;
font-family: "Roboto", serif;
font-size: 14px;

}
}

.carousel-slider:hover .overlay {
opacity: 1;
}
/* just for jsfiddle */

.nav-wrapper{
  background-color:white;
  border:1px;
}
.middle-indicator{
 position:absolute;
 top:50%;
 }
.middle-indicator-text{
 font-size: 4.2rem;
}
a.middle-indicator-text{
  color:white !important;
}
.content-indicator{
  width: 64px;
  height: 64px;
  background: none;
  -moz-border-radius: 50px;
  -webkit-border-radius: 50px;
  border-radius: 50px;
}
p3{
font-family:"Coiny",serif;
font-size:26px;
color:orange;
}
  .indicators{
  visibility: hidden;
}


.fake-div {
width: 100%;
position: relative;

}
.tabs-content.carousel .carousel-item{height:800px}
.dot {
  height: 50px;
  width: 50px;
  background-color: #bbb;
  border-radius: 50%;
  display: inline-block;
}
.btn{
  background-color:grey;
}
.carousel .carousel-item {
height:600px !important;}
.txt:hover {
  text-decoration: underline;
}
/* Parts are from twitter.com */
@-webkit-keyframes typing { from { width: 0; } }
@-webkit-keyframes blink-caret { 50% { border-color: transparent; } }

h1 {
font: bold 300% Consolas, Monaco, monospace;
border-right: .1em solid black;
width: 16.5em;
width: 21ch;
margin: 2em 1em;
white-space: nowrap;
overflow: hidden;
-webkit-animation: typing 10s steps(21, end),
           blink-caret .5s step-end infinite alternate;
}

</style>
<body style="font-family:'Helvetica Neue',Helvetica,Arial,sans-serif; font-size:13px;">
    <div id="warning">
        <h1>Speech Recognition SDK not found.</h1>
        <h2>Please execute <code>npm run bundle</code> and reload.</h2>
    </div>

    <nav>
      <div class="nav-wrapper"style="color:yellow">
        <img src="https://scontent.fyyz1-1.fna.fbcdn.net/v/t1.15752-9/36717208_2083507918345692_4667995423384797184_n.png?_nc_fx=fyto1-1&_nc_cat=0&oh=3e977f2f31bc5d0880d2b2fb167d2516&oe=5BE8FB8C" style="width:75px;height:45px" class="brand-logo"></a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">

        </ul>
      </div>
    </nav>

    <div id="content" style="display:none">
        <table width="100%">
            <tr>
                <td></td>
                <td>
                    <h1>subiff.ai</h1>


                             <label>Translate To:</label>
                             <select class="browser-default"style="width:30%">
                       <option value="" disabled selected>Choose your language</option>
                               <option value="1">None(English)</option>
                               <option value="2">Chinese - CN</option>
                               <option value="3">Chinese - HK</option>
                               <option value="4">Chinese - TW</option>
                               <option value="5">Arabic - EG</option>
                               <option value="6">Swedish - SE</option>
                               <option value="7">Portuguese - BR</option>
                               <option value="8">Hindi - IN</option>
                               <option value="9">Vietnamese</option>


                             </select>
<div hidden>


                       <a href="https://www.microsoft.com/cognitive-services/en-us/sign-up" target="_blank">lecture code:</a>
                       <input id="key" type="text" style="width:25%" size="40" value="YOUR_BING_SPEECH_API_KEY">
</div>
                     </div>

                       <td align="left">
                           <select id="languageOptions">
                               <option value="ar-EG">Arabic - EG</option>
                               <option value="ca-ES">Catalan - ES</option>
                               <option value="da-DK">Danish - DK</option>
                               <option value="da-DK">Danish - DK</option>
                               <option value="de-DE">German - DE</option>
                               <option value="en-AU">English - AU</option>
                               <option value="en-CA">English - CA</option>
                               <option value="en-GB">English - GB</option>
                               <option value="en-IN">English - IN</option>
                               <option value="en-NZ">English - NZ</option>
                               <option value="zh-CN">Chinese - CN</option>
                               <option value="en-US" selected="selected">English - US</option>
                               <option value="es-ES">Spanish - ES</option>
                               <option value="es-MX">Spanish - MX</option>
                               <option value="fi-FI">Finnish - FI</option>
                               <option value="fr-CA">French - CA</option>
                               <option value="fr-FR">French - FR</option>
                               <option value="hi-IN">Hindi - IN</option>
                               <option value="it-IT">Italian - IT</option>
                               <option value="ja-JP">Japanese - JP</option>
                               <option value="ko-KR">Korean - KR</option>
                               <option value="nb-NO">Norwegian - NO</option>
                               <option value="nl-NL">Dutch - NL</option>
                               <option value="pl-PL">Polish - PL</option>
                               <option value="pt-BR">Portuguese - BR</option>
                               <option value="pt-PT">Portuguese - PT</option>
                               <option value="ru-RU">Russian - RU</option>
                               <option value="sv-SE">Swedish - SE</option>
                               <option value="zh-CN">Chinese - CN</option>
                               <option value="zh-HK">Chinese - HK</option>
                               <option value="zh-TW">Chinese - TW</option>
                           </select>
                       </td>
</div>

     </div>




                    <select id="recognitionMode">
                        <option value="Dictation">Dictation</option>
                    </select>


                <td align="left">
                    <select id="formatOptions">
                        <option value="Simple" selected="selected">Simple Result</option>
                        <option value="Detailed">Detailed Result</option>
                    </select>

                    <select id="inputSource">
                        <option value="Mic" selected="selected">Microphone</option>
                        <option value="File">Audio File</option>
                    </select>

            </tr>
            <tr>
                <td></td>
                <td>
                  <a class="btn-floating btn-large waves-effect waves-light blue"id="startBtn" disabled="disabled"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAL8SURBVGhD7Zk7aFRRFEUnUYMaMYJBiYUgWokpxMIg2NgoYiOIn07EFIqNpBHBRkQbMWBIFSLaWIk2Ilho0Eab2PkBCxEkIClEAoEgmXHtsO/w1PiZyX0/fAs2Odxz7jl3EybvvkmtoqKiokm9Xu9GQ41Go8tL5QQDPaiBmXfogJfLRzASwMwDtM3p8sDZw29kFn1JxFdQt8uKT8LIR7QRjaP5xNoxlxabpBEv6Q/AAHqpdUE8gfqdLiac8xcjgqVO1k6hz85/QyOE61xSLDjYokYCOji5YRlx3TQaJOx0STHgQH80EiC/HT1VrSCeRANO5w9n+icjAeqOqNZ7xB3U53R+tGpEULsKXUaz3juD8r0dMLxlIwH2bEH3tV8Qv0X53A6Y37aRAHv3ozfqI4h1O9jqdDYwd8lGBC266DGEvrrfwu2AcLVL0oVBUYwE6NNHu9v8rIe+6KjT6cGsqEYC9NPtYFK9BbFuBzucjg8zUjEiaKvbwSCa9gzdDm4Sxr8d0DQ1IwEdnP4jMuJZuh2cJox3O6BZ6kYCzOhHE5oniOPdDuiXmZEAs46jGc8VtwhXOt0eNMjUCHN0Z3uimYL4FdrjdPvQKxMjjNDn5AZKfk7OEMb5nNAoVSM6KL1/fq8ZRetdEgd6p2aEnrtR8k3zGdrpdFzoH90IvTag5Lv/J3SCsMMl8aF5NCO0WU6f8yh8GzOHrhKucUl6MCSKEfbvQ6/VSxA/RNl9P8bMJRlh62b23lMPQfweHXQ6O5jdlhHq9ZZ4CTXfEvlxAeXzlsjglo1Qexh98D5xF21yOh9aMUKNnsqPVS+I9VTe63S+cJ6/GiG3Fl1Hc67VU/ks4TKX5A+H+a0RljvQSXJTrplHo4S9LikOHGpRIyztYu2FcoL4OUrnqRwDzviDEcJe4jEUnspTKN2ncgw4YDCia8Q5lHwqXyNM/6kcAw66YCQJBh6hcv3XinM3jXB4PZUPOVUuOH8Ph9d3txeJy/ufXQ6/AhP5f5teUVHxv1OrfQde6spJ9QiNFQAAAABJRU5ErkJggg==" /></a>
                  <a class="btn-floating btn-large waves-effect waves-light blue"id="stopBtn" disabled="disabled"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB7SURBVGhD7dnBCcAgEAVRq0ox9pFiUk/6MlGYQ45CPhLCPBBkYZE5WyRJ0kutta2fg7MznjZ2Hvsb4/X64/VCv5+Mp40d1sd+ZbyeITAkzRAYkmYIDEkzBIakGQJD0gyBIWmGwJA0Q2BImiEwJM0QfCnkH98KkiT9Qyk3WqG9XnxVLzQAAAAASUVORK5CYII="></a>


                  <button class="btn waves-effect waves-light" type="submit" name="action"onclick="document.getElementById('demo').innerHTML = 'Students can enhance student experience,increased lecture quality,higher test scores, and  save time for studying.'">Summary
   </button>


                    <input type="file" id="filePicker" accept=".wav" style="display:none"/>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                  <div class="row">
      <div class="col s12"><span id="hypothesisDiv" style="width:1000px;height:200px;font-size:150%;display:block;"></span></div>

    </div>

                    <table>
                        <tr>


                        </tr>
                        <tr>
                            <td>
                           <textarea id="phraseDiv" style="display: inline-block;width:200px;height:200px"></textarea>
                           <textarea id="demo" style="display: inline-block;width:200px;height:200px"></textarea>
                            </td>                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td align="right">Status:</td>
                <td align="left"><span id="statusDiv"></span></td>
            </tr>
        </table>
    </div>

    <!-- SDK REFERENCE -->
    <script src="../../distrib/speech.sdk.bundle.js"></script>

    <!-- SDK USAGE -->
    <script>
        // On document load resolve the SDK dependency

        function Initialize(onComplete) {
            if (!!window.SDK) {
                document.getElementById('content').style.display = 'block';
                document.getElementById('warning').style.display = 'none';
                onComplete(window.SDK);
            }
        }

        // Setup the recognizer
        function RecognizerSetup(SDK, recognitionMode, language, format, subscriptionKey) {

            switch (recognitionMode) {
                case "Interactive" :
                    recognitionMode = SDK.RecognitionMode.Interactive;
                    break;
                case "Conversation" :
                    recognitionMode = SDK.RecognitionMode.Conversation;
                    break;
                case "Dictation" :
                    recognitionMode = SDK.RecognitionMode.Dictation;
                    break;
                default:
                    recognitionMode = SDK.RecognitionMode.Interactive;
            }

            var recognizerConfig = new SDK.RecognizerConfig(
                new SDK.SpeechConfig(
                    new SDK.Context(
                        new SDK.OS(navigator.userAgent, "Browser", null),
                        new SDK.Device("SpeechSample", "SpeechSample", "1.0.00000"))),
                recognitionMode,
                language, // Supported languages are specific to each recognition mode. Refer to docs.
                format); // SDK.SpeechResultFormat.Simple (Options - Simple/Detailed)


            var useTokenAuth = false;

            var authentication = function() {
                if (!useTokenAuth)
                    return new SDK.CognitiveSubscriptionKeyAuthentication(subscriptionKey);

                var callback = function() {
                    var tokenDeferral = new SDK.Deferred();
                    try {
                        var xhr = new(XMLHttpRequest || ActiveXObject)('MSXML2.XMLHTTP.3.0');
                        xhr.open('GET', '/token', 1);
                        xhr.onload = function () {
                            if (xhr.status === 200)  {
                                tokenDeferral.Resolve(xhr.responseText);
                            } else {
                                tokenDeferral.Reject('Issue token request failed.');
                            }
                        };
                        xhr.send();
                    } catch (e) {
                        window.console && console.log(e);
                        tokenDeferral.Reject(e.message);
                    }
                    return tokenDeferral.Promise();
                }

                return new SDK.CognitiveTokenAuthentication(callback, callback);
            }();

            var files = document.getElementById('filePicker').files;
            if (!files.length) {
                return SDK.CreateRecognizer(recognizerConfig, authentication);
            } else {
                return SDK.CreateRecognizerWithFileAudioSource(recognizerConfig, authentication, files[0]);
            }
        }

        // Start the recognition
        function RecognizerStart(SDK, recognizer) {
            recognizer.Recognize((event) => {
                /*
                 Alternative syntax for typescript devs.
                 if (event instanceof SDK.RecognitionTriggeredEvent)
                */
                switch (event.Name) {
                    case "RecognitionTriggeredEvent" :
                        UpdateStatus("Initializing");
                        break;
                    case "ListeningStartedEvent" :
                        UpdateStatus("Listening");
                        break;
                    case "RecognitionStartedEvent" :
                        UpdateStatus("Listening_Recognizing");
                        break;
                    case "SpeechStartDetectedEvent" :
                        UpdateStatus("Listening_DetectedSpeech_Recognizing");
                        console.log(JSON.stringify(event.Result)); // check console for other information in result
                        break;
                    case "SpeechHypothesisEvent" :
                        UpdateRecognizedHypothesis(event.Result.Text, false);
                        console.log(JSON.stringify(event.Result)); // check console for other information in result
                        break;
                    case "SpeechFragmentEvent" :
                        UpdateRecognizedHypothesis(event.Result.Text, true);
                        console.log(JSON.stringify(event.Result)); // check console for other information in result
                        break;
                    case "SpeechEndDetectedEvent" :
                        OnSpeechEndDetected();
                        UpdateStatus("Processing_Adding_Final_Touches");
                        console.log(JSON.stringify(event.Result)); // check console for other information in result
                        break;
                    case "SpeechSimplePhraseEvent" :
                        UpdateRecognizedPhrase(JSON.stringify(event.Result, null, 3));
                        break;
                    case "SpeechDetailedPhraseEvent" :
                        UpdateRecognizedPhrase(JSON.stringify(event.Result, null, 3));
                        break;
                    case "RecognitionEndedEvent" :
                        OnComplete();
                        UpdateStatus("Idle");
                        console.log(JSON.stringify(event)); // Debug information
                        break;
                    default:
                        console.log(JSON.stringify(event)); // Debug information
                }
            })
            .On(() => {
                // The request succeeded. Nothing to do here.
            },
            (error) => {
                console.error(error);
            });
        }

        // Stop the Recognition.
        function RecognizerStop(SDK, recognizer) {
            // recognizer.AudioSource.Detach(audioNodeId) can be also used here. (audioNodeId is part of ListeningStartedEvent)
            recognizer.AudioSource.TurnOff();
        }
    </script>

    <!-- Browser Hooks -->
    <script>
        var startBtn, stopBtn, hypothesisDiv, phraseDiv, statusDiv;
        var key, languageOptions, formatOptions, recognitionMode, inputSource, filePicker;
        var SDK;
        var recognizer;
        var previousSubscriptionKey;
        var instances;
        var elems;

        document.addEventListener('DOMContentLoaded', function() {
         var elems = document.querySelectorAll('.dropdown-trigger');
         var instances = M.Dropdown.init(elems, options);
       });

        document.addEventListener("DOMContentLoaded", function () {
            createBtn = document.getElementById("createBtn");
            startBtn = document.getElementById("startBtn");
            stopBtn = document.getElementById("stopBtn");
            phraseDiv = document.getElementById("phraseDiv");
            hypothesisDiv = document.getElementById("hypothesisDiv");
            statusDiv = document.getElementById("statusDiv");
            key = document.getElementById("key");
            languageOptions = document.getElementById("languageOptions");
            formatOptions = document.getElementById("formatOptions");
            inputSource = document.getElementById("inputSource");
            recognitionMode = document.getElementById("recognitionMode");
            filePicker = document.getElementById('filePicker');

            languageOptions.addEventListener("change", Setup);
            formatOptions.addEventListener("change", Setup);
            recognitionMode.addEventListener("change", Setup);

            startBtn.addEventListener("click", function () {
                if (key.value == "" || key.value == "YOUR_BING_SPEECH_API_KEY") {
                    alert("Please enter your class code id");
                    return;
                }
                if (inputSource.value === "File") {
                    filePicker.click();
                } else {
                    if (!recognizer || previousSubscriptionKey != key.value) {
                        previousSubscriptionKey = key.value;
                        Setup();
                    }

                    hypothesisDiv.innerHTML = "";
                    phraseDiv.innerHTML = "";
                    RecognizerStart(SDK, recognizer);
                    startBtn.disabled = true;
                    stopBtn.disabled = false;
                }
            });

            key.addEventListener("focus", function () {
               if (key.value == "YOUR_BING_SPEECH_API_KEY") {
                   key.value = "";
               }
            });

            key.addEventListener("focusout", function () {
               if (key.value == "") {
                   key.value = "YOUR_BING_SPEECH_API_KEY";
               }
            });

            filePicker.addEventListener("change", function () {
                Setup();
                hypothesisDiv.innerHTML = "";
                phraseDiv.innerHTML = "";
                RecognizerStart(SDK, recognizer);
                startBtn.disabled = true;
                stopBtn.disabled = false;
                filePicker.value = "";
            });

            stopBtn.addEventListener("click", function () {
                RecognizerStop(SDK, recognizer);
                startBtn.disabled = false;
                stopBtn.disabled = true;
            });

            Initialize(function (speechSdk) {
                SDK = speechSdk;
                startBtn.disabled = false;
            });
        });

        function Setup() {
            if (recognizer != null) {
                RecognizerStop(SDK, recognizer);
            }
            recognizer = RecognizerSetup(SDK, recognitionMode.value, languageOptions.value, SDK.SpeechResultFormat[formatOptions.value], key.value);
        }

        function UpdateStatus(status) {
            statusDiv.innerHTML = status;
        }

        function UpdateRecognizedHypothesis(text, append) {
            if (append)
                hypothesisDiv.innerHTML += text + " ";
            else
                hypothesisDiv.innerHTML = text;

            var length = hypothesisDiv.innerHTML.length;
            if (length > 403) {
                hypothesisDiv.innerHTML = "..." + hypothesisDiv.innerHTML.substr(length-400, length);
            }
        }

        function OnSpeechEndDetected() {
            stopBtn.disabled = true;
        }

        function UpdateRecognizedPhrase(json) {

            setTimeout(function(){
              phraseDiv.innerHTML += json+ "\n";
              console.log(json.DisplayText);
              hypothesisDiv.innerHTML = "";
            },3000);

        }

        function OnComplete() {
            startBtn.disabled = false;
            stopBtn.disabled = true;
        }

    </script>https://new-bat-71.localtunnel.me
</body>
</html>
